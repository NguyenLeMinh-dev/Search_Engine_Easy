<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Chỉ Đường - Quán Ăn Cần Thơ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
    
    <script src="https://unpkg.com/leaflet.animatedmarker/src/AnimatedMarker.js"></script>
    
    <link rel="stylesheet" href="style/styles.css"> 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .restaurant-item-appear { animation: fadeInUp 0.4s ease-out forwards; opacity: 0; }
        .contact-link { display: inline-block; transition: transform 0.2s ease-out; }
        .contact-link:hover { transform: scale(1.15); transition: transform 0.2s ease-out; }
        body { font-family: 'Inter', sans-serif; }
        .action-button { transition: all 0.2s ease-in-out; }
        .action-button:hover { transform: scale(1.05); }
        #map { height: 500px; width: 100%; border-radius: 0.5rem; position: relative; }
        .modal { transition: opacity 0.25s ease; }
        .leaflet-routing-container { display: none; }
        .travel-mode-btn { border: 2px solid transparent; transition: all 0.2s ease; }
        .travel-mode-btn.active { border-color: #0d9488; background-color: #ccfbf1; color: #134e4a; }
        .travel-mode-btn.active svg { color: #0d9488; }
    </style>
</head>
<body class="bg-gray-100">
    
    <div class="container mx-auto p-4 md:p-8">
        
        <header class="flex items-center mb-8">
            <div class="w-32 text-left">
                <a href="#" class="text-xl font-bold text-gray-800 tracking-wide uppercase">
                    GROUP 1 SEG
                </a>
            </div>
            
            <div class = "flex-grow text-center">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Khám Phá Ẩm Thực Cần Thơ</h1>
                <p class="text-gray-600 mt-2">Chọn một quán ăn và nhấn "Chỉ đường" để xem bản đồ trực tiếp!</p>    
            </div>
            
            <div class="w-32 text-right">
                <div id="auth-container">
                    <button id="loginButton" class="contact-link font-semibold text-teal-600 text-lg hover:text-teal-800">
                        Đăng nhập
                    </button>
                </div>
                <div id="user-greeting" class="hidden">
                    <span class="font-semibold text-gray-700">Chào, <span id="username-display"></span>!</span>
                    <button id="logoutButton" class="text-sm text-red-500 hover:underline"> (Thoát)</button>
                </div>
            </div>    
        </header>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <section class="bg-white p-4 rounded-lg shadow-md flex flex-col md:col-span-2">
                <h2 class="text-xl font-semibold text-gray-700 mb-3 text-center">Tìm kiếm quán ăn</h2>
                <div class="flex space-x-2" id="search-form">
                    <input type="search" id="search-input" placeholder="Nhập tên món ăn, địa chỉ..." class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:outline-none">
                    <button id="search-button" class="action-button bg-teal-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-teal-600">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                        Tìm
                    </button>
                </div>
                <p id="search-status" class="text-gray-600 mt-3 text-sm min-h-[20px] text-center"></p>
            </section>
            <section class="bg-white p-4 rounded-lg shadow-md text-center flex flex-col justify-start md:col-span-1">
                <h2 class="text-xl font-semibold text-gray-700 mb-3">Lấy Vị Trí Hiện Tại Của Bạn</h2>
                <button id="getLocationBtn" class="action-button bg-green-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-600 mx-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>
                    Xác định vị trí của tôi
                </button>
                <p id="locationStatus" class="text-gray-600 mt-3 text-sm min-h-[20px]"></p>
            </section>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            
            <main id="restaurant-list" class="lg:col-span-3 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
                </main>

            <aside class="lg:col-span-1">
                <div class="bg-white p-4 rounded-lg shadow-md sticky top-8">
                    <h2 class="text-xl font-semibold text-gray-700 mb-3 text-center">Quảng Cáo</h2>
                    <div class="flex-grow h-full min-h-[500px] bg-gray-200 rounded-lg flex items-center justify-center">
                        <p class="text-gray-500 italic">Nội dung quảng cáo dài</p>
                    </div>
                </div>
            </aside>
            
        </div>
        
    </div> <div id="mapModal" class="modal fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 hidden opacity-0">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl">
            <div class="p-4 border-b flex justify-between items-center">
                <h3 id="mapModalTitle" class="text-xl font-semibold">Bản đồ chỉ đường</h3>
                <button id="closeMapModal" type="button" class="text-2xl font-bold text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            <div class="p-3 bg-gray-50 border-b">
                <div id="travel-mode-selector" class="flex justify-center space-x-2">
                </div>
            </div>
            <div class="p-2 relative">
                 <div id="map"></div> <div id="map-loader" class="absolute inset-0 bg-white/70 flex-col items-center justify-center hidden z-20">
                    <svg class="animate-spin h-10 w-10 text-teal-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <p class="mt-4 font-semibold text-teal-700">Đang tính toán lộ trình...</p>
                 </div>
            </div>
            <div class="p-4 bg-gray-50 border-t flex justify-between items-center">
                <div id="route-summary" class="text-sm font-semibold text-gray-700">
                    <p>Quãng đường: <span id="summary-distance" class="font-bold text-teal-600">--</span></p>
                    <p>Thời gian (ước tính): <span id="summary-time" class="font-bold text-teal-600">--</span></p>
                </div>
                <button id="startAnimationBtn" type="button" class="action-button bg-teal-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-teal-600 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                    Bắt đầu mô phỏng
                </B>
            </div>
        </div>
    </div>
    
    <div id="detailModal" class="modal fixed inset-0 bg-black bg-opacity-60 z-40 flex items-center justify-center p-4 hidden opacity-0">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            
            <div class="p-4 border-b flex justify-between items-center">
                <h3 id="detailModalTitle" class="text-2xl font-semibold text-gray-800">Tên Quán Ăn</h3>
                <button id="closeDetailModal" type="button" class="text-3xl font-bold text-gray-500 hover:text-gray-800">&times;</button>
            </div>
            
            <div class="p-4 md:p-6 overflow-y-auto">
                <img id="detailModalImage" src="https://placehold.co/600x400/e2e8f0/64748b?text=Đang+tải..." alt="Ảnh quán ăn" class="w-full h-64 object-cover rounded-lg mb-4">
                
                <div class="flex items-center space-x-4 mb-4">
                    
                    <div id="detailModalSaveBtn" classS="flex items-center text-gray-700 hover:text-red-500 transition-colors cursor-pointer">
                        <svg id="detailModalSaveIcon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                        </svg>
                        <span id="detailModalSaveText">Lưu</span>
                    </div>
                    
                    <button id="detailModalShareBtn" type="button" class="flex items-center text-gray-700 hover:text-blue-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 100 4.186m0-4.186c.114.022.227.043.344.064a2.25 2.25 0 012.164 2.164c.021.117.042.23.064.344m-2.572 1.612a2.25 2.25 0 012.164-2.164c.021-.117.042-.23.064-.344a2.25 2.25 0 012.164 2.164c.021.117.042.23.064.344m-2.572-1.612a2.25 2.25 0 00-2.164 2.164c-.021.117-.042.23-.064.344m2.572 1.612a2.25 2.25 0 002.164 2.164c.021.117.042.23.064.344m-2.572-1.612L12 15l-3.879 2.121m0-4.242L12 9l3.879-2.121" />
                        </svg>
                        <span>Chia sẻ</span>
                    </button>
                </div>

                <div class="space-y-3">
                    <div>
                        <h4 class="font-semibold text-gray-500 text-sm uppercase">Địa chỉ</h4>
                        <p id="detailModalAddress" class="text-gray-800 text-base">Đang tải...</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-500 text-sm uppercase mb-1">Đánh giá</h4>
                        <div class="flex items-center text-gray-400 text-2xl">
                            <span>☆</span><span>☆</span><span>☆</span><span>☆</span><span>☆</span>
                            <span class="text-sm text-gray-600 ml-2">(Chưa có đánh giá)</span>
                        </div>
                    </div>

                </div>
            </div>
            
            <div class="p-4 bg-gray-50 border-t flex justify-end">
                <button id="detailModalNavigateBtn" type="button" class="action-button bg-blue-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-600">
                    Chỉ đường
                </button>
            </div>

        </div>
    </div>
    
    <div id="loginModal" class="modal fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 hidden opacity-0">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md">

            <div class="p-4 border-b flex justify-between items-center">
                <h3 id="loginModalTitle" class="text-2xl font-semibold text-gray-800">Đăng nhập</h3>
                <button id="closeLoginModal" type="button" class="text-3xl font-bold text-gray-500 hover:text-gray-800">&times;</button>
            </div>

            <div class="p-6">
                <form id="loginForm">
                    <div class="mb-4">
                        <label for="login-username" class="block text-sm font-medium text-gray-700">Tên đăng nhập</label>
                        <input type="text" id="login-username" name="username" required class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:outline-none">
                    </div>
                    <div class="mb-4">
                        <label for="login-password" class="block text-sm font-medium text-gray-700">Mật khẩu</label>
                        <input type="password" id="login-password" name="password" required class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:outline-none">
                    </div>
                    <button type="submit" class="w-full action-button bg-teal-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-teal-600">
                        Đăng nhập
                    </button>
                    <p id="loginStatus" class="text-sm text-red-500 mt-2 text-center"></p>
                </form>

                <hr class="my-6">

                <h4 class="text-lg font-semibold text-center text-gray-700 mb-3">Chưa có tài khoản?</h4>
                <form id="registerForm">
                    <div class="mb-4">
                        <label for="reg-username" class="block text-sm font-medium text-gray-700">Tên đăng nhập</label>
                        <input type="text" id="reg-username" name="username" required class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                    </div>
                    <div class="mb-4">
                        <label for="reg-password" class="block text-sm font-medium text-gray-700">Mật khẩu</label>
                        <input type="password" id="reg-password" name="password" required class="mt-1 block w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none">
                    </div>
                    <button type="submit" class="w-full action-button bg-blue-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-600">
                        Đăng ký
                    </button>
                    <p id="registerStatus" class="text-sm text-green-500 mt-2 text-center"></p>
                </form>
            </div>
        </div>
    </div>

    <script src="static/main.js"></script>
</body>
</html>